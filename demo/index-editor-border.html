<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>things-editor-border Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="import" href="../things-editor-border.html">

  </head>
  <body unresolved>

    <template is="dom-bind" id="app">
      <style is="custom-style">
      :root {
        --things-editor-border: {
          background: lightgray;
        }
      };

      textarea {
        width: 600px;
        height: 300px;
      }
      </style>

      <p>An example of <code>&lt;things-editor-border&gt;</code>:</p>

      <p>Border Style</p>

      <things-editor-border id="border"
                            type="{{border.type}}"
                            line-width="{{border.lineWidth}}"
                            stroke-style="{{border.strokeStyle}}"
                            line-dash="{{border.lineDash}}"
                            on-border-change="onChange">
      </things-editor-border>

      <p></p>

      <textarea class="xx" value="[[text]]"></textarea>

      <table>
        <tr>
          <td>1</td>
          <td>2</td>
          <td>3</td>
        </tr>
        <tr>
          <td>4</td>
          <td>5</td>
          <td>6</td>
        </tr>
        <tr>
          <td>7</td>
          <td>8</td>
          <td>9</td>
        </tr>
      </table>

    </template>

    <script>
      window.addEventListener('WebComponentsReady', function(e) {
        var app = document.querySelector('#app')

        app.onChange = function(e) {
          var changes = e.detail;

          app.text = JSON.stringify(app.border, null, "\t");

          var lefts = document.querySelectorAll('td:nth-child(1)');
          var centers = document.querySelectorAll('td:nth-child(2)');
          var rights = document.querySelectorAll('td:nth-child(3)');
          var tops = document.querySelectorAll('tr:nth-child(1) td');
          var middles = document.querySelectorAll('tr:nth-child(2) td');
          var bottoms = document.querySelectorAll('tr:nth-child(3) td');
          var all = document.querySelectorAll('td');

          // app.border 값을 클리어시킴.
          if(changes.type) {
            app.border = changes;

            switch(changes.type) {
            case 'all':
              // 만일 모든 td의 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'in':
              // 만일 모든 ins의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'out':
              // 만일 모든 out의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'left':
              // 만일 모든 left의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'right':
              // 만일 모든 right의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'center':
              // 만일 모든 center의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'middle':
              // 만일 모든 middle의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'top':
              // 만일 모든 top의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            case 'bottom':
              // 만일 모든 bottom의 td 스타일 값이 같으면 그 값으로 app.border를 설정한다.
              break;
            }
          }

          var border = app.border;
          if(border.lineWidth === undefined || border.lineDash === undefined || border.strokeStyle === undefined)
            return;

          var border_style = [(border.lineWidth || 0) + 'px', border.lineDash || 'solid', border.strokeStyle].filter(function(val) {
            return !!val;
          }).join(' ');

          switch(border.type) {
          case 'all':
            all.forEach(function(td) {
              td.style['border'] = border_style;
            });
            break;
          case 'in':
            centers.forEach(function(td) {
              td.style['border-left'] = border_style;
              td.style['border-right'] = border_style;
            });
            middles.forEach(function(td) {
              td.style['border-top'] = border_style;
              td.style['border-bottom'] = border_style;
            });
            lefts.forEach(function(td) {
              td.style['border-right'] = border_style;
            });
            rights.forEach(function(td) {
              td.style['border-left'] = border_style;
            });
            tops.forEach(function(td) {
              td.style['border-bottom'] = border_style;
            });
            bottoms.forEach(function(td) {
              td.style['border-top'] = border_style;
            });
            break;
          case 'out':
            lefts.forEach(function(td) {
              td.style['border-left'] = border_style;
            });
            rights.forEach(function(td) {
              td.style['border-right'] = border_style;
            });
            tops.forEach(function(td) {
              td.style['border-top'] = border_style;
            });
            bottoms.forEach(function(td) {
              td.style['border-bottom'] = border_style;
            });
            break;
          case 'left':
            lefts.forEach(function(td) {
              td.style['border-left'] = border_style;
            });
            break;
          case 'right':
            rights.forEach(function(td) {
              td.style['border-right'] = border_style;
            });
            break;
          case 'center':
            centers.forEach(function(td) {
              td.style['border-left'] = border_style;
              td.style['border-right'] = border_style;
            });
            lefts.forEach(function(td) {
              td.style['border-right'] = border_style;
            });
            rights.forEach(function(td) {
              td.style['border-left'] = border_style;
            });
            break;
          case 'middle':
            middles.forEach(function(td) {
              td.style['border-top'] = border_style;
              td.style['border-bottom'] = border_style;
            });
            tops.forEach(function(td) {
              td.style['border-bottom'] = border_style;
            });
            bottoms.forEach(function(td) {
              td.style['border-top'] = border_style;
            });
            break;
          case 'top':
            tops.forEach(function(td) {
              td.style['border-top'] = border_style;
            });
            break;
          case 'bottom':
            bottoms.forEach(function(td) {
              td.style['border-bottom'] = border_style;
            });
            break;
          }
        }

        app.border = {}
      })
    </script>

  </body>
</html>
