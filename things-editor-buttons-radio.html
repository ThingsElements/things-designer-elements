<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-button/paper-button.html">

<!--
여러 버튼 중에서 하나만 눌리거나, 모두 눌리지 않은 상태만을 갖는 라디오 형태의 버튼이다.

Example:

    <things-editor-buttons-radio value="{{value}}">
    </things-editor-buttons-radio>

@demo demo/index-editor-buttons-radio.html
@hero hero.svg
-->

<dom-module id="things-editor-buttons-radio">
  <template>
    <style>
      :host {
        display: block;
        @apply(--things-editor-buttons-radio)
      }
      ::content > paper-button {
        background:url(./images/icon-properties.png) 85% 2px no-repeat;
        opacity:.7;

        background-color:rgba(0,0,0,.07);
        @apply(--things-editor-buttons-radio-button)
      }

      ::content > paper-button[active] {
        background-color:#fff;opacity:1;
        @apply(--things-editor-buttons-radio-button-active)
      }

      ::content > paper-button[data-value=halign-left] {
        background-position:50%  -398px
      }
      ::content > paper-button[data-value=halign-center] {
        background-position:50%  -498px
      }
      ::content > paper-button[data-value=halign-right] {
        background-position:50%  -598px
      }
      ::content > paper-button[data-value=halign-justify] {
        background-position:50%  -698px
      }
      ::content > paper-button[data-value=valign-top] {
        background-position:50%  -798px
      }
      ::content > paper-button[data-value=valign-middle] {
        background-position:50%  -898px
      }
      ::content > paper-button[data-value=valign-bottom] {
        background-position:50%  -998px
      }
      ::content > paper-button[data-value=bold] {
        background-position:40% -1097px
      }
      ::content > paper-button[data-value=italic] {
        background-position:50% -1197px
      }
      ::content > paper-button[data-value=underline] {
        background-position:50% -1297px
      }
      ::content > paper-button[data-value=strike] {
        background-position:50% -1397px
      }
      ::content > paper-button[data-value=uppercase] {
        background-position:50% -1497px
      }
      ::content > paper-button[data-value=lowercase] {
        background-position:50% -1597px
      }
      ::content > paper-button[data-value=superscript] {
        background-position:50% -1697px
      }
      ::content > paper-button[data-value=subscript] {
        background-position:50% -1797px
      }
    </style>

    <content select="paper-button"></content>

  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'things-editor-buttons-radio',

      properties: {
        /**
         * `value`는 버튼의 눌린 상태를 값으로 갖는 속성이다.
         */
        value: {
          type: Object,
          notify: true,
          observer: '_onValueChanged'
        }
      },

      listeners: {
        'tap': "_onTapButton"
      },

      ready: function() {
        Array.from(this.querySelectorAll('paper-button')).forEach(function(button) {
          button.toggleAttribute('toggles', true)
        })
      },

      _onValueChanged: function(value) {

        Array.from(this.querySelectorAll('paper-button')).forEach(function(button) {
          if(value === button.getAttribute('data-value'))
            button.active = true
          else
            button.active = false
        })
      },

      _onTapButton: function(e) {
        var target = e.target;

        if(target.tagName !== 'PAPER-BUTTON')
          return

        if(target.active)
          this.value = target.getAttribute('data-value')
        else
          this.value = null
      }
    });
  })();
  </script>
</dom-module>

