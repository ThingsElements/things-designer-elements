<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-button/paper-button.html">

<!--
여러 버튼 중에서 하나만 눌리거나, 모두 눌리지 않은 상태만을 갖는 라디오 형태의 버튼이다.

Example:

    <things-editor-buttons-radio value="{{value}}">
    </things-editor-buttons-radio>

@demo demo/index-editor-buttons-radio.html
@hero hero.svg
-->

<dom-module id="things-editor-buttons-radio">
  <template>
    <style>
      :host {
        display: block;
        @apply(--things-editor-buttons-radio)
      }
      ::shadow paper-button {
        background-color:rgba(0,0,0,.07);
        @apply(--things-editor-buttons-radio-button)
      }

      ::shadow paper-button[active] {
        background-color:#fff;opacity:1;
        @apply(--things-editor-buttons-radio-button-active)
      }

    </style>

    <content select="paper-button"></content>

  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'things-editor-buttons-radio',

      properties: {
        /**
         * `value`는 버튼의 눌린 상태를 값으로 갖는 속성이다.
         */
        value: {
          type: Object,
          notify: true
        }
      },

      listeners: {
        'tap': "_onTapButton"
      },

      ready: function() {
        Array.from(this.querySelectorAll('paper-button')).forEach(function(button) {
          button.toggleAttribute('toggles', true)
        })
      },

      _onTapButton: function(e) {
        var target = e.target;

        if(target.tagName !== 'PAPER-BUTTON')
          return

        Array.from(this.querySelectorAll('paper-button')).forEach(function(button) {

          if(button === target)
            button.active = true
          else
            button.active = false
        })

        this.value = target.getAttribute('data-value')
      }
    });
  })();
  </script>
</dom-module>

